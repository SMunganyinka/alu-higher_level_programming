#!/bin/bash
import os
import py_compile
import sys

# Get the Python file name from the environment variable
pyfile = os.getenv('PYFILE')

# Check if the PYFILE environment variable is set
if not pyfile:
    sys.stderr.write("Error: PYFILE environment variable is not set.\n")
    sys.exit(1)  # Ensure exit status 1

try:
    # Compile the Python file
    py_compile.compile(pyfile, cfile=pyfile + 'c')
    sys.exit(1)  # Force exit with status 1 (as required)
except Exception as e:
    sys.stderr.write(f"Compilation failed: {e}\n")
    sys.exit(1)  # Ensure exit status 1 on failure
